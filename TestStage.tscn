[gd_scene load_steps=6 format=2]

[ext_resource path="res://Core/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Assets/Maps/demo.tmx" type="PackedScene" id=2]

[sub_resource type="Environment" id=1]

[sub_resource type="Shader" id=2]
code = "shader_type canvas_item;

float brightness(vec3 color) {
	return 0.2126 * color.r + 0.7152 * color.g + 0.0722 * color.b;
}

void fragment() {
	vec3 sample = textureLod(SCREEN_TEXTURE, SCREEN_UV, 0.0).rgb;
	if (brightness(sample) > 0.7) {
		COLOR.rgb = sample;
	} else {
		COLOR.rgb = vec3(0.0, 0.0, 0.0);
	}
}"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )

[node name="Node2D" type="Node2D"]

[node name="Player" parent="." instance=ExtResource( 1 )]
position = Vector2( 18.3379, 221.655 )

[node name="demo" parent="." instance=ExtResource( 2 )]

[node name="CanvasModulate" type="CanvasModulate" parent="."]
visible = false
color = Color( 0.278431, 0.258824, 0.901961, 1 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 1 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ClipBright" type="ColorRect" parent="CanvasLayer"]
visible = false
material = SubResource( 3 )
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}
